<% method = goal.persisted? ? :patch : :post %>

<form action="<%= method == :patch ? goal_url(goal) : goals_url %>"
  method="post">
  <%= csrf_html %>
  <% if method == :patch %>
    <input type="hidden" name="_method" value="patch">
  <% end %>

  <label>goal
    <textarea name="goal[body]" rows="8" cols="40"></textarea>
  </label>

  <label>private?
    <input type="checkbox"
      <%= goal.is_private ? "checked" : "" %>
      name="goal[is_private]"
      value="true">
  </label>

  <input type="submit"
    value="<%= method == :patch ? "Edit goal" : "Add goal" %>">
</form>
